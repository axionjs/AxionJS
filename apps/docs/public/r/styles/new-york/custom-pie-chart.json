{
  "$schema": "http://localhost:3001/schema/registry-item.json",
  "name": "custom-pie-chart",
  "type": "registry:block",
  "author": "axionjs (https://www.axionjs.com)",
  "registryDependencies": [
    "card",
    "chart"
  ],
  "files": [
    {
      "path": "charts/custom-pie-chart.tsx",
      "content": "\"use client\";\r\n\r\nimport { TrendingUp } from \"lucide-react\";\r\nimport { Cell, Pie, PieChart, Sector } from \"recharts\";\r\nimport { useState } from \"react\";\r\n\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/registry/new-york/ui/card\";\r\nimport {\r\n  type ChartConfig,\r\n  ChartContainer,\r\n  ChartTooltip,\r\n  ChartTooltipContent,\r\n} from \"@/registry/new-york/ui/chart\";\r\n\r\nconst chartData = [\r\n  { name: \"Mobile\", value: 45, fill: \"var(--color-mobile)\" },\r\n  { name: \"Desktop\", value: 35, fill: \"var(--color-desktop)\" },\r\n  { name: \"Tablet\", value: 20, fill: \"var(--color-tablet)\" },\r\n];\r\n\r\nconst chartConfig = {\r\n  mobile: {\r\n    label: \"Mobile\",\r\n    color: \"hsl(var(--chart-1))\",\r\n  },\r\n  desktop: {\r\n    label: \"Desktop\",\r\n    color: \"hsl(var(--chart-2))\",\r\n  },\r\n  tablet: {\r\n    label: \"Tablet\",\r\n    color: \"hsl(var(--chart-3))\",\r\n  },\r\n} satisfies ChartConfig;\r\n\r\nconst renderActiveShape = (props: any) => {\r\n  const {\r\n    cx,\r\n    cy,\r\n    innerRadius,\r\n    outerRadius,\r\n    startAngle,\r\n    endAngle,\r\n    fill,\r\n    payload,\r\n    percent,\r\n    value,\r\n  } = props;\r\n\r\n  return (\r\n    <g>\r\n      <text\r\n        x={cx}\r\n        y={cy - 10}\r\n        dy={8}\r\n        textAnchor=\"middle\"\r\n        fill=\"var(--foreground)\"\r\n        className=\"text-lg font-bold\"\r\n      >\r\n        {payload.name}\r\n      </text>\r\n      <text\r\n        x={cx}\r\n        y={cy + 10}\r\n        dy={8}\r\n        textAnchor=\"middle\"\r\n        fill=\"var(--foreground)\"\r\n        className=\"text-sm\"\r\n      >\r\n        {value + \" (\" + (percent * 100).toFixed(0) + \"%)\"}\r\n      </text>\r\n      <Sector\r\n        cx={cx}\r\n        cy={cy}\r\n        innerRadius={innerRadius}\r\n        outerRadius={outerRadius + 10}\r\n        startAngle={startAngle}\r\n        endAngle={endAngle}\r\n        fill={fill}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n\r\nexport function CustomPieChart() {\r\n  const [activeIndex, setActiveIndex] = useState(0);\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle>Interactive Pie Chart</CardTitle>\r\n        <CardDescription>Device usage distribution</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <ChartContainer config={chartConfig}>\r\n          <PieChart\r\n            accessibilityLayer\r\n            width={500}\r\n            height={300}\r\n            margin={{ top: 20, right: 20, bottom: 20, left: 20 }}\r\n          >\r\n            <ChartTooltip\r\n              content={\r\n                <ChartTooltipContent\r\n                  formatter={(value) =>\r\n                    value + \" users (\" + ((value / 100) * 100).toFixed(0) + \"%)\"\r\n                  }\r\n                />\r\n              }\r\n            />\r\n            <Pie\r\n              activeIndex={activeIndex}\r\n              activeShape={renderActiveShape}\r\n              data={chartData}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              innerRadius={60}\r\n              outerRadius={80}\r\n              dataKey=\"value\"\r\n              onMouseEnter={(_, index) => setActiveIndex(index)}\r\n              onClick={(_, index) => setActiveIndex(index)}\r\n            >\r\n              {chartData.map((entry, index) => (\r\n                <Cell\r\n                  key={\"cell-\" + index}\r\n                  fill={entry.fill}\r\n                  className=\"transition-colors duration-300 outline-none\"\r\n                  tabIndex={0}\r\n                  role=\"button\"\r\n                  aria-label={entry.name + \": \" + entry.value + \" users\"}\r\n                />\r\n              ))}\r\n            </Pie>\r\n          </PieChart>\r\n        </ChartContainer>\r\n      </CardContent>\r\n      <CardFooter className=\"flex-col items-start gap-2 text-sm\">\r\n        <div className=\"flex gap-2 font-medium leading-none\">\r\n          Mobile usage leads at 45% <TrendingUp className=\"h-4 w-4\" />\r\n        </div>\r\n        <div className=\"leading-none text-muted-foreground\">\r\n          Hover or click on segments for details\r\n        </div>\r\n      </CardFooter>\r\n    </Card>\r\n  );\r\n}\r\n",
      "type": "registry:block",
      "target": ""
    }
  ],
  "categories": [
    "charts",
    "charts-pie"
  ]
}