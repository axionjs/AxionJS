{
  "$schema": "http://localhost:3001/schema/registry-item.json",
  "name": "new-password-form",
  "type": "registry:auth",
  "author": "axionjs (https://www.axionjs.com)",
  "description": "Form for setting new password.",
  "files": [
    {
      "path": "auth/components/new-password-form.tsx",
      "content": "\"use client\";\r\n\r\nimport * as z from \"zod\";\r\nimport { useState, useTransition } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport { Button } from \"@/registry/new-york/ui/button\";\r\nimport { CardWrapper } from \"@/registry/new-york/auth/components/card-wrapper\";\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/registry/new-york/ui/form\";\r\nimport { FormSuccess } from \"@/registry/new-york/auth/components/form-success\";\r\nimport { FormError } from \"@/registry/new-york/auth/components/form-error\";\r\nimport { Input } from \"@/registry/new-york/ui/input\";\r\nimport { newPassword } from \"@/registry/new-york/auth/actions/auth-actions\";\r\nimport { NewPasswordSchema } from \"@/registry/new-york/auth/schemas\";\r\n\r\nexport function NewPasswordForm() {\r\n  const searchParams = useSearchParams();\r\n  const token = searchParams.get(\"token\");\r\n\r\n  const [error, setError] = useState<string | undefined>(\"\");\r\n  const [success, setSuccess] = useState<string | undefined>(\"\");\r\n\r\n  const [isPending, startTransition] = useTransition();\r\n\r\n  const form = useForm<z.infer<typeof NewPasswordSchema>>({\r\n    resolver: zodResolver(NewPasswordSchema),\r\n    defaultValues: { password: \"\" },\r\n  });\r\n\r\n  const onSubmit = (values: z.infer<typeof NewPasswordSchema>) => {\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n\r\n    startTransition(() => {\r\n      newPassword(values, token).then((data) => {\r\n        setError(data?.error);\r\n        setSuccess(data?.success);\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <CardWrapper\r\n      mainHeaderLabel=\"New Password\"\r\n      subHeaderLabel=\"Enter a new password\"\r\n      backButtonLabel=\"Back to login\"\r\n      backButtonHref=\"/auth/login\"\r\n    >\r\n      <Form {...form}>\r\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n          <div className=\"space-y-4\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"password\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Password</FormLabel>\r\n                  <FormControl>\r\n                    <Input\r\n                      {...field}\r\n                      disabled={isPending}\r\n                      placeholder=\"******\"\r\n                      type=\"password\"\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n          <FormError message={error} />\r\n          <FormSuccess message={success} />\r\n          <Button disabled={isPending} type=\"submit\" className=\"w-full\">\r\n            Reset password\r\n          </Button>\r\n        </form>\r\n      </Form>\r\n    </CardWrapper>\r\n  );\r\n}\r\n",
      "type": "registry:auth_comp",
      "target": ""
    }
  ]
}