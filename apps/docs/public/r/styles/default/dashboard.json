{
  "$schema": "http://localhost:3001/schema/registry-item.json",
  "name": "dashboard",
  "type": "registry:auth",
  "author": "axionjs (https://www.axionjs.com)",
  "description": "Dashboard page for authenticated users.",
  "registryDependencies": [
    "badge"
  ],
  "files": [
    {
      "path": "auth/pages/dashboard/page.tsx",
      "content": "import { redirect } from \"next/navigation\";\r\nimport { auth } from \"@/registry/default/auth/lib/auth\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/registry/default/ui/card\";\r\nimport { Button } from \"@/registry/default/ui/button\";\r\nimport {\r\n  Avatar,\r\n  AvatarFallback,\r\n  AvatarImage,\r\n} from \"@/registry/default/ui/avatar\";\r\nimport { Badge } from \"@/registry/default/ui/badge\";\r\nimport { currentUser } from \"@/registry/default/dynamic-components/simple-auth/lib/get-user\";\r\nimport Link from \"next/link\";\r\n\r\nexport default async function UserDashboard() {\r\n  const session = await auth();\r\n  const userData = await currentUser();\r\n\r\n  if (!session) {\r\n    redirect(\"/auth/login\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-screen w-screen bg-white overflow-hidden\">\r\n      <div className=\"h-full flex flex-col\">\r\n        {/* Compact Header */}\r\n        <div className=\"flex-shrink-0 px-6 py-4 border-b border-gray-100\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-medium text-gray-900\">Dashboard</h1>\r\n              <p className=\"text-sm text-gray-600 mt-1\">\r\n                Welcome, {session?.user?.name}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n              <span className=\"text-xs text-gray-600\">Online</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6\">\r\n          <div className=\"grid gap-6 lg:grid-cols-2 h-full max-w-5xl mx-auto\">\r\n            {/* Profile Card */}\r\n            <Card className=\"border border-gray-200 bg-white h-fit\">\r\n              <CardHeader className=\"text-center pb-4 pt-6\">\r\n                <div className=\"flex justify-center mb-4\">\r\n                  <div className=\"relative\">\r\n                    <Avatar className=\"w-16 h-16 border border-gray-200\">\r\n                      <AvatarImage\r\n                        src={session?.user?.image || \"\"}\r\n                        className=\"object-cover\"\r\n                      />\r\n                      <AvatarFallback className=\"bg-gray-100 text-gray-700 text-lg font-medium\">\r\n                        {session?.user?.name?.charAt(0) || \"U\"}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <div className=\"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white\"></div>\r\n                  </div>\r\n                </div>\r\n                <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                  {session?.user?.name || \"User\"}\r\n                </h2>\r\n                <p className=\"text-sm text-gray-500\">Profile Information</p>\r\n              </CardHeader>\r\n\r\n              <CardContent className=\"space-y-3 px-6 pb-6\">\r\n                {/* User ID */}\r\n                <div className=\"flex items-center justify-between py-3 px-3 bg-gray-50 rounded-lg\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-900\">User ID</p>\r\n                    <p className=\"text-xs text-gray-500\">Identifier</p>\r\n                  </div>\r\n                  <p className=\"text-xs text-gray-600 font-mono bg-white px-2 py-1 rounded border\">\r\n                    {session?.user?.id\r\n                      ? `${session.user.id.slice(0, 8)}...`\r\n                      : \"N/A\"}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Email */}\r\n                <div className=\"flex items-center justify-between py-3 px-3 bg-gray-50 rounded-lg\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-900\">Email</p>\r\n                    <p className=\"text-xs text-gray-500\">Contact</p>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-700 truncate max-w-[150px]\">\r\n                    {session?.user?.email || \"Not provided\"}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Role */}\r\n                <div className=\"flex items-center justify-between py-3 px-3 bg-gray-50 rounded-lg\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-900\">Role</p>\r\n                    <p className=\"text-xs text-gray-500\">Access level</p>\r\n                  </div>\r\n                  <Badge\r\n                    variant={\r\n                      session?.user?.role === \"ADMIN\" ? \"default\" : \"secondary\"\r\n                    }\r\n                    className={`text-xs ${\r\n                      session?.user?.role === \"ADMIN\"\r\n                        ? \"bg-gray-900 text-white\"\r\n                        : \"bg-gray-200 text-gray-700\"\r\n                    }`}\r\n                  >\r\n                    {session?.user?.role || \"USER\"}\r\n                  </Badge>\r\n                </div>\r\n\r\n                {/* Two Factor Authentication */}\r\n                {!userData?.isOAuth && (\r\n                  <div className=\"flex items-center justify-between py-3 px-3 bg-gray-50 rounded-lg\">\r\n                    <div>\r\n                      <p className=\"text-sm font-medium text-gray-900\">\r\n                        Two-Factor Auth\r\n                      </p>\r\n                      <p className=\"text-xs text-gray-500\">Security</p>\r\n                    </div>\r\n                    <Badge\r\n                      className={`text-xs ${\r\n                        session?.user?.isTwoFactorEnabled\r\n                          ? \"bg-green-100 text-green-800\"\r\n                          : \"bg-red-100 text-red-800\"\r\n                      }`}\r\n                    >\r\n                      {session?.user?.isTwoFactorEnabled\r\n                        ? \"ENABLED\"\r\n                        : \"DISABLED\"}\r\n                    </Badge>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Account Status */}\r\n                <div className=\"mt-4 p-3 bg-green-50 rounded-lg border border-green-100\">\r\n                  <div className=\"flex items-center justify-center space-x-2\">\r\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                    <p className=\"text-sm font-medium text-green-800\">\r\n                      Account Active\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Actions & Settings */}\r\n            <div className=\"space-y-6\">\r\n              {/* Account Settings */}\r\n              <Card className=\"border border-gray-200 bg-white\">\r\n                <CardHeader className=\"pb-4 pt-6\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3\">\r\n                      <div className=\"w-6 h-6 border border-gray-400 rounded-full\"></div>\r\n                    </div>\r\n                    <CardTitle className=\"text-lg font-semibold text-gray-900\">\r\n                      Settings\r\n                    </CardTitle>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">Manage account</p>\r\n                  </div>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-3 px-6 pb-6\">\r\n                  <Link href=\"/profile\">\r\n                    <Button\r\n                      className=\"w-full justify-between bg-gray-50 hover:bg-gray-100 text-gray-900 border border-gray-200 h-10\"\r\n                      variant=\"outline\"\r\n                    >\r\n                      <span>Edit Profile</span>\r\n                      <span>→</span>\r\n                    </Button>\r\n                  </Link>\r\n\r\n                  {!session?.user?.isOAuth && (\r\n                    <Link href=\"/profile/change-password\">\r\n                      <Button\r\n                        className=\"w-full justify-between bg-gray-50 hover:bg-gray-100 text-gray-900 border border-gray-200 h-10\"\r\n                        variant=\"outline\"\r\n                      >\r\n                        <span>Change Password</span>\r\n                        <span>→</span>\r\n                      </Button>\r\n                    </Link>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n\r\n              {/* Admin Access */}\r\n              {session.user.role === \"ADMIN\" && (\r\n                <Card className=\"border border-gray-300 bg-gray-50\">\r\n                  <CardHeader className=\"pb-4 pt-6\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-3\">\r\n                        <div className=\"w-6 h-6 bg-gray-600 rounded-full\"></div>\r\n                      </div>\r\n                      <CardTitle className=\"text-lg font-semibold text-gray-900\">\r\n                        Admin Panel\r\n                      </CardTitle>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        Administrative access\r\n                      </p>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent className=\"px-6 pb-6\">\r\n                    <p className=\"text-sm text-gray-600 mb-4 text-center\">\r\n                      Manage users and system settings\r\n                    </p>\r\n                    <Link href=\"/admin\">\r\n                      <Button className=\"w-full bg-gray-900 hover:bg-gray-800 text-white h-10\">\r\n                        <span>Admin Dashboard</span>\r\n                        <span className=\"ml-2\">→</span>\r\n                      </Button>\r\n                    </Link>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:page",
      "target": "app/dashboard/page.tsx"
    },
    {
      "path": "auth/lib/get-user.ts",
      "content": "import { auth } from \"@/registry/default/dynamic-components/simple-auth/lib/auth\";\r\n\r\nexport const currentUser = async () => {\r\n  const session = await auth();\r\n  return session?.user;\r\n};\r\n\r\nexport const currentRole = async () => {\r\n  const session = await auth();\r\n  return session?.user?.role;\r\n};\r\nexport const isCurrentAccountOAuth = async () => {\r\n  const session = await auth();\r\n  return session?.user?.isOAuth;\r\n};\r\n",
      "type": "registry:lib",
      "target": ""
    },
    {
      "path": "auth/components/user-info.tsx",
      "content": "import { ExtendedUser } from \"@/registry/default/auth/lib/next-auth\";\r\nimport { Badge } from \"@/registry/default/ui/badge\";\r\nimport { Card, CardContent, CardHeader } from \"@/registry/default/ui/card\";\r\nimport { currentUser } from \"@/registry/default/auth/lib/get-user\";\r\nimport {\r\n  Avatar,\r\n  AvatarFallback,\r\n  AvatarImage,\r\n} from \"@/registry/default/ui/avatar\";\r\nimport { User } from \"lucide-react\";\r\n\r\ninterface UserInfoProps {\r\n  user?: ExtendedUser;\r\n  label: string;\r\n}\r\n\r\nexport async function UserInfo({ user, label }: UserInfoProps) {\r\n  const userData = await currentUser();\r\n  return (\r\n    <Card className=\"shadow-md\">\r\n      <CardHeader>\r\n        <p className=\"text-center text-2xl font-semibold\">{label}</p>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        <div className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm\">\r\n          <p className=\"text-sm font-medium\">ID</p>\r\n          <p className=\"text-sm text-muted-foreground\">{user?.id}</p>\r\n        </div>\r\n        <div className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm\">\r\n          <p className=\"text-sm font-medium\">Name</p>\r\n          <p className=\"mtext-sm text-muted-foreground\">{user?.name}</p>\r\n        </div>\r\n\r\n        <Avatar>\r\n          <AvatarImage src={user?.image || \"\"} />\r\n          <AvatarFallback className=\"bg-sky-500\">\r\n            <User className=\"text-white\" />\r\n          </AvatarFallback>\r\n        </Avatar>\r\n\r\n        <div className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm\">\r\n          <p className=\"text-sm font-medium\">Email</p>\r\n          <p className=\"text-sm text-muted-foreground\">{user?.email}</p>\r\n        </div>\r\n        <div className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm\">\r\n          <p className=\"text-sm font-medium\">Role</p>\r\n          <p className=\"text-sm text-muted-foreground\">{user?.role}</p>\r\n        </div>\r\n        {!userData?.isOAuth && (\r\n          <div className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm\">\r\n            <p className=\"text-sm font-medium\">Two Factor Authentication</p>\r\n            <Badge\r\n              variant={user?.isTwoFactorEnabled ? \"default\" : \"destructive\"}\r\n            >\r\n              {user?.isTwoFactorEnabled ? \"ON\" : \"OFF\"}\r\n            </Badge>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n",
      "type": "registry:auth_comp",
      "target": ""
    }
  ]
}